define(["/data/maps/test.js","animation"],function(e,t){return{maps:{test:e},currentMap:null,sheetImage:null,buildMap:function(e){this.currentMap=this.maps[e],this.sheetImage=new Image,this.sheetImage.src=this.currentMap.tilesets[0].image},animate:function(e){var t,n,r,i,s,o,u,a,f=this.currentMap.layers.length;for(n=0;n<f;n++){t=this.currentMap.layers[n],e.setup(t.name),o=t.width,u=t.height;for(i=0;i<u;i++)for(r=0;r<o;r++)s=t.data[o*i+r]-1,s!==-1&&(a=this.currentMap.tilesets[0].tileproperties[s],e.context.drawImage(this.sheetImage,this.currentMap.tileheight*a.x,this.currentMap.tileheight*a.y,this.currentMap.tileheight,this.currentMap.tileheight,this.currentMap.tileheight*r,this.currentMap.tileheight*i,this.currentMap.tileheight,this.currentMap.tileheight))}},collide:function(e,t){var n=[],r=this.currentMap.layers.length;for(l=0;l<r;l++){var i=this.currentMap.layers[l],s=i.width,o=i.data[s*t+e]-1;if(o!==-1){var u=this.currentMap.tilesets[0].tileproperties;n.push(u[o])}}return n}}})